(function(e){function t(t){for(var a,s,c=t[0],o=t[1],d=t[2],u=0,h=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var o=n[c];0!==i[o]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"19eb":function(e,t,n){},"1daf":function(e,t,n){"use strict";var a=n("3725"),i=n.n(a);i.a},3725:function(e,t,n){},"4bb8":function(e,t,n){},"4fde":function(e,t,n){"use strict";var a=n("19eb"),i=n.n(a);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.gameStarted?n("section",{staticClass:"game-board"},[n("board"),n("main-card"),e.game.auction?n("div",[n("div",[e._v("АУКЦИОН")]),n("div",[e._v("Цена лота: "+e._s(e.game.auction.bet))]),n("div",[e._v("Делает ставку: "+e._s(e.game.auction.current.name))]),n("input",{ref:"bet"}),n("button",{on:{click:e.accept}},[e._v("V")]),n("button",{on:{click:e.cancelAuc}},[e._v("X")])]):n("div",[n("div",{staticClass:"actions"},[n("button",{attrs:{disabled:e.game._action||!e.game._endOfTurn},on:{click:e.startTurn}},[e._v("Ход ")]),n("button",{attrs:{disabled:!e.game._action},on:{click:e.doAction}},[e._v("Действие ")]),n("button",{attrs:{disabled:e.game._action||e.game._endOfTurn},on:{click:e.endTurn}},[e._v("Закончить")]),n("button",{attrs:{disabled:e.game._endOfTurn}},[e._v("Обменятся")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.game._action&&e.currentCard.canBuy,expression:"game._action && currentCard.canBuy"}],on:{click:e.dontBuy}},[e._v("Не покупать ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.checkJail,expression:"checkJail"}],on:{click:e.payFine}},[e._v("Выйти из тюрьмы за 50М ")])]),n("div",[e._v(e._s(e.game.cubes))]),n("player-info")],1),n("player-cards")],1):n("section",{staticClass:"start-screen"},[n("p",[e._v("Начните игру")]),n("p",[e._v("Новая игра")]),n("div",{on:{click:function(t){return e.startGame(2)}}},[e._v("(2 игрока)")]),n("div",{on:{click:function(t){return e.startGame(3)}}},[e._v("(3 игрока)")]),n("div",{on:{click:function(t){return e.startGame(4)}}},[e._v("(4 игрока)")])])},r=[],s=n("5530"),c=n("2f62"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board"},[n("div",{staticClass:"dots"},e._l(e.game.board,(function(t){return n("span",{key:t.index,staticClass:"board-item",class:e.cardClass(t)})})),0)])},d=[],l=n("ade3"),u={name:"Board",data:function(){return{}},computed:Object(s["a"])({},Object(c["e"])(["game"]),{},Object(c["c"])(["currentPlayer"])),methods:{cardClass:function(e){return[e.cardType,Object(l["a"])({},e.color,e.color),{active:this.currentPlayer.position===e.index}]}}},h=u,y=(n("d5a9"),n("2877")),p=Object(y["a"])(h,o,d,!1,null,"e0ad19ba",null),f=p.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"player-info"},[n("ul",{staticClass:"player-list"},e._l(e.game.players,(function(t){return n("li",{key:t.id,class:e.activeElementStyle(t)},[e._v(e._s(t.name)+" / cash: "+e._s(t.cash))])})),0)])},_=[],v={name:"PlayerInfo",computed:Object(s["a"])({},Object(c["e"])(["game"]),{},Object(c["c"])(["currentPlayer"])),methods:{activeElementStyle:function(e){var t={};return e.id===this.currentPlayer.id&&Object.assign(t,Object(l["a"])({active:!0},"player"+e.index,"true")),t}}},m=v,g=(n("1daf"),Object(y["a"])(m,b,_,!1,null,"f9443c0e",null)),T=g.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"player-cards"},[e._v("Ваши карты:"),e.playerCards.length<=16?n("div",{staticClass:"cards-board"},e._l(e.playerCards,(function(t){return n("div",{key:t.id,class:["color"+t.catIndex],on:{click:function(n){return e.selectCard(t)}}},[e._v(e._s((t.fullRent?"* ":"")+t.name.slice(0,10)+"..."))])})),0):n("div",{staticClass:"cards-board"},e._l(e.playerCards,(function(t){return n("div",{key:t.id,class:["color"+t.catIndex],on:{click:function(n){return e.selectCard(t)}}},[e._v(e._s((t.fullRent?"* ":"")+t.name.slice(0,5)+"..."))])})),0)])},w=[],O={name:"PlayerCards",computed:Object(s["a"])({},Object(c["c"])(["playerCards"])),methods:{selectCard:function(e){console.log(e)}}},C=O,I=(n("9608"),Object(y["a"])(C,x,w,!1,null,"497ccdfd",null)),A=I.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:e.swipeHandler,expression:"swipeHandler",arg:"swipe"}],staticClass:"card"},[e.game.specialCard?n("div",{staticClass:"card-body"},[n("div",[e._v(e._s(e.game.currentSpecialCard.name))]),n("div",[e._v(e._s(e.game.currentSpecialCard.disc)+" ")])]):n("div",{staticClass:"card-body"},[e.currentCard.category?n("div",{staticClass:"card-category",class:["color"+this.currentCard.catIndex]},[e._v(e._s(e.currentCard.category))]):e._e(),n("div",{staticClass:"content"},[n("div",[e._v(e._s(e.currentCard.name))]),n("div",[e._v(e._s(e.currentCard.disc))]),e.currentCard.cost>0?n("div",[e._v("Price: "+e._s(e.currentCard.cost))]):e._e(),e.currentCard.rent[e.currentCard.houses]>0?n("div",[e._v("Rent: "+e._s(e.currentCard.rent[e.currentCard.houses]))]):e._e(),10===e.currentCard.index?n("div",[e._v("Узники АЗКАБАНА:"),n("ul",e._l(e.game.jail,(function(t){return n("li",{key:t.id},[e._v(e._s(t.name))])})),0)]):e._e()]),e.getOwner?n("div",{staticClass:"owner",class:["owner-color"+e.getOwner.index]},[e._v("Владелец: "+e._s(e.getOwner.name))]):e._e()])])},k=[],j={name:"MainCard",computed:Object(s["a"])({},Object(c["e"])(["game"]),{},Object(c["c"])(["currentCard","getOwner"])),methods:Object(s["a"])({},Object(c["b"])(["startTurn","doAction","endTurn"]),{swipeHandler:function(e){"left"!==e&&"right"!==e||(this.game._action?this.doAction():this.game._endOfTurn?this.startTurn():this.endTurn())}})},G=j,R=(n("4fde"),Object(y["a"])(G,P,k,!1,null,"c22d6768",null)),B=R.exports,S=n("310e"),F=n.n(S),E={components:{board:f,"player-info":T,"player-cards":A,"main-card":B,draggable:F.a},computed:Object(s["a"])({},Object(c["e"])(["gameStarted","game"]),{},Object(c["c"])(["currentCard","getOwner","playerCards","checkJail"])),methods:Object(s["a"])({},Object(c["b"])(["startTurn","doAction","endTurn","dontBuy","acceptAuc","cancelAuc","payFine"]),{},Object(c["d"])(["startGame"]),{accept:function(){this.acceptAuc(this.$refs.bet.value)}})},M=E,J=(n("5c0b"),Object(y["a"])(M,i,r,!1,null,null,null)),L=J.exports,N=n("8c4f");a["a"].use(N["a"]);var X=[{path:"/",name:"Home",component:function(){return null}},{path:"/about",name:"About",component:function(){return null}}],Y=new N["a"]({mode:"history",base:"/",routes:X}),H=Y,$=(n("99af"),n("4de4"),n("c740"),n("4160"),n("d81d"),n("159b"),n("a434"),["Гарри Поттер","Рон Уизли","Волан-де-Морт","Драко Малфой","Северус Снегг","Альбус Дамблдор","Рубеус Хагрид","Полумна Лавгуд","Добби","Невилл Долгопупс","Минерва Макгонагалл","Белатриса Лестрейндж","Римус Люпин","Геллерт Гриндевальд","Гермиона Грейнджер"]);function U(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}}var W=function(e){return U($),$.splice(e-1)},V=(n("13d5"),n("45fc"),n("b0c0"),n("3835")),q=n("d4ec"),z=n("bee2"),D=n("262e"),K=n("2caf"),Q={NORMAL:"normal",START:"start",JAIL:"jail",TOJAIL:"tojail",FREE:"free",TAX:"tax",MAGIC:"magic",POTION:"potion",TRANSPORT:"transport",FACTORY:"factory"},Z={GO:"go",GIFT:"gift",TAX:"tax",JAILFREE:"free",TOJAIL:"tojail",HOUSETAX:"housetax",GOTO:"goto",PLAYERSGIFT:"playersgift",PLAYERSTAX:"playerstax"},ee=function e(t,n,a,i){Object(q["a"])(this,e),this.index=t||0,this.name=n||"",this.disc=a||"",this.cardType=i||Q.NORMAL},te=function(e){Object(D["a"])(n,e);var t=Object(K["a"])(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(q["a"])(this,n),e=t.call(this,a.index,a.name,a.disc,a.cardType),e.category=a.category||null,e.catIndex=a.catIndex||null,e.cost=a.cost||0,e.rent=a.rent||[0,0,0,0,0,0],e.fullRent=!1,e.houses=0,e.buildCost=0,e.deposit=a.deposit||0,e.buyout=e.deposit+.01*e.deposit*10,e.canBuy=a.canBuy||!1,e.owner=a.owner||null,e.disabled=!1,e.color=null,e}return n}(ee),ne=function(e){Object(D["a"])(n,e);var t=Object(K["a"])(n);function n(e,a){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r.subType,c=r.cost,o=r.destanation;return Object(q["a"])(this,n),i=t.call(this,null,e,a,Q.MAGIC),i.subType=s||Z.GIFT,i.cost=c||0,i.destanation=o||0,i}return n}(ee),ae=function(e){Object(D["a"])(n,e);var t=Object(K["a"])(n);function n(e,a){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r.subType,c=r.cost,o=r.destanation;return Object(q["a"])(this,n),i=t.call(this,null,e,a,Q.POTION),i.subType=s||Z.GIFT,i.cost=c||0,i.destanation=o||0,i}return n}(ee),ie=[new te({index:0,name:"ВПЕРД",disc:"Пройдите поле вперед и получите 200",cardType:Q.START}),new te({index:1,category:"Хогсмид",catIndex:1,name:'Трактир "Кабанья Голова"',canBuy:!0,cost:60,rent:[2,10,30,90,160,250],buildCost:50,deposit:30}),new te({index:2,name:"Заклинания",cardType:Q.MAGIC}),new te({index:3,category:"Хогсмид",catIndex:1,name:'Паб "Три Метлы"',canBuy:!0,cost:60,rent:[4,20,60,180,320,450],buildCost:50,deposit:30}),new te({index:4,name:"Налог Министерства Магии",canBuy:!1,rent:[200],owner:"game",cardType:Q.TAX}),new te({index:5,name:"Хогвардс Экспресс",catIndex:100,canBuy:!0,cost:200,rent:[25,50,100,200],deposit:100,cardType:Q.TRANSPORT}),new te({index:6,category:"Дом Гарри",catIndex:2,name:"Чулан под лестницей",canBuy:!0,cost:100,rent:[6,30,90,270,400,550],buildCost:50,deposit:50}),new te({index:7,name:"Зелья",cardType:Q.POTION}),new te({index:8,category:"Дом Гарри",catIndex:2,name:"Дом Блэков",canBuy:!0,cost:100,rent:[6,30,90,270,400,550],buildCost:50,deposit:50}),new te({index:9,category:"Дом Гарри",catIndex:2,name:"Нора",canBuy:!0,cost:120,rent:[8,40,100,300,450,600],buildCost:50,deposit:60}),new te({index:10,name:"Азкабан",cardType:Q.JAIL}),new te({index:11,category:"Косой переулок",catIndex:3,name:"Магазин Волшебные Вредилки",canBuy:!0,cost:140,rent:[10,50,150,450,625,750],buildCost:100,deposit:70}),new te({index:12,catIndex:200,name:"Журнал Придира",canBuy:!0,cost:150,deposit:75,cardType:Q.FACTORY}),new te({index:13,category:"Косой переулок",catIndex:3,name:"Магазин все для Квиддича",canBuy:!0,cost:140,rent:[10,50,150,450,625,750],buildCost:100,deposit:70}),new te({index:14,category:"Косой переулок",catIndex:3,name:"Магазин Совы",canBuy:!0,cost:160,rent:[12,60,180,500,700,900],buildCost:100,deposit:80}),new te({index:15,name:"Метла",catIndex:100,canBuy:!0,cost:200,rent:[25,50,100,200],deposit:100,cardType:Q.TRANSPORT}),new te({index:16,category:"Косой переулок",catIndex:4,name:"Лавка Оливандера",canBuy:!0,cost:180,rent:[14,70,200,550,750,950],buildCost:100,deposit:90}),new te({index:17,name:"Заклинания",cardType:Q.MAGIC}),new te({index:18,category:"Косой переулок",catIndex:4,name:"Банк Гринготтс",canBuy:!0,cost:180,rent:[14,70,200,550,750,950],buildCost:100,deposit:90}),new te({index:19,category:"Косой переулок",catIndex:4,name:"Дырявый Котел",canBuy:!0,cost:200,rent:[16,80,220,600,800,1e3],buildCost:100,deposit:100}),new te({index:20,name:"Бесплатная стоянка",cardType:Q.FREE}),new te({index:21,category:"Министерство магии",catIndex:5,name:"Сектор борьбы с неправомерным использованием заклинаний",canBuy:!0,cost:220,rent:[18,90,250,700,875,1050],buildCost:150,deposit:110}),new te({index:22,name:"Зелья",cardType:Q.POTION}),new te({index:23,category:"Министерство магии",catIndex:5,name:"Отдел мракоборцев",canBuy:!0,cost:220,rent:[18,90,250,700,875,1050],buildCost:150,deposit:110}),new te({index:24,category:"Министерство магии",catIndex:5,name:"Отдел по борьбе с незакон. испол. изобрет. маглов",canBuy:!0,cost:240,rent:[20,100,300,750,925,1100],buildCost:150,deposit:110}),new te({index:25,name:"Летучий порох",catIndex:100,canBuy:!0,cost:200,rent:[25,50,100,200],deposit:100,cardType:Q.TRANSPORT}),new te({index:26,category:"Министерство магии",catIndex:6,name:"Отдел контроля за магическими существами",canBuy:!0,cost:260,rent:[22,110,330,800,975,1150],buildCost:150,deposit:130}),new te({index:27,category:"Министерство магии",catIndex:6,name:"Отдел магических проишествий и катастроф",canBuy:!0,cost:260,rent:[22,110,330,800,975,1150],buildCost:150,deposit:130}),new te({index:28,catIndex:200,name:"Газета Ежедневный пророк",canBuy:!0,cost:150,deposit:75,cardType:Q.FACTORY}),new te({index:29,category:"Министерство магии",catIndex:6,name:"Отдел тайн",canBuy:!0,cost:280,rent:[24,120,360,850,1025,1200],buildCost:150,deposit:140}),new te({index:30,name:"Диментор Азкабана",cardType:Q.TOJAIL}),new te({index:31,category:"Хогвартс",catIndex:7,name:"Хижина Хагрида",canBuy:!0,cost:300,rent:[26,130,390,900,1100,1275],buildCost:200,deposit:150}),new te({index:32,category:"Хогвартс",catIndex:7,name:"Выручай Комната",canBuy:!0,cost:300,rent:[26,130,390,900,1100,1275],buildCost:200,deposit:150}),new te({index:33,name:"Заклинания",cardType:Q.MAGIC}),new te({index:34,category:"Хогвартс",catIndex:7,name:"Башня Гриффиндора",canBuy:!0,cost:320,rent:[28,150,450,1e3,1200,1400],buildCost:200,deposit:160}),new te({index:35,name:"Портал",catIndex:100,canBuy:!0,cost:200,rent:[25,50,100,200],deposit:100,cardType:Q.TRANSPORT}),new te({index:36,name:"Зелья",cardType:Q.POTION}),new te({index:37,category:"Хогвартс",catIndex:8,name:"Поле Квиддича",canBuy:!0,cost:350,rent:[35,175,500,1100,1300,1500],buildCost:200,deposit:160}),new te({index:38,name:"Коммисия банка Гринготтс",canBuy:!1,rent:[75],owner:"game",cardType:Q.TAX}),new te({index:39,category:"Хогвартс",catIndex:8,name:"Большой зал",canBuy:!0,cost:400,rent:[50,200,600,1400,1700,2e3],buildCost:300,deposit:200})],re=ie,se=[new ne("Волшебные часы Уизли","Отправляйтесь на клетку GO и получите 200M",{subType:Z.GO}),new ne("Вы унследовали домового эльфа","Получите 100М",{subType:Z.GIFT,cost:100}),new ne("Вы неудачно трансгрессировали и получили ранение","Заплатите 150М за лечение",{subType:Z.TAX,cost:150}),new ne("Вас ударила гремучая Ива","Заплатите 50М за лекарства",{subType:Z.TAX,cost:50}),new ne("Банк Гринготтс ошибся в расчетах","Получите 200М",{subType:Z.GIFT,cost:200}),new ne("Вам необходимо купить книги с заклинаниями","Заплатите 50М школьный сбор",{subType:Z.TAX,cost:50}),new ne("Побез из Азкабана. Вы получили карту побега","Бесплатный выход из тюрьмы",{subType:Z.JAILFREE}),new ne("Вы успешно применили заклинание на уроке","Получите 50М",{subType:Z.GIFT,cost:50}),new ne("Вас поймали за незаконное использование заклинаний","Отправляйтесь в Азкабан",{subType:Z.TOJAIL}),new ne("В вашем районе видели как вы использовали заклинание","Заплатите налог за кажый дом по 40М и каждый отель по 120М",{subType:Z.HOUSETAX,cost:40}),new ne("Вы получили второй приз в турнире 3-х волшебников","Получите 10М",{subType:Z.GIFT,cost:10}),new ne("У вас день рождение","Получите 10М от каждого игрока",{subType:Z.PLAYERSGIFT,cost:10}),new ne("Все хотят вступить в отряд Дамблдора","Получите 50М от каждого игрока",{subType:Z.PLAYERSGIFT,cost:50}),new ne("Вы унаследовали мантию невидимку","Получите 100М",{subType:Z.GIFT,cost:100}),new ne("Получите ганорар за статью о Гарри в Еженедельном Пророке","Получите 20М",{subType:Z.GIFT,cost:20}),new ne("Вы стали хранителем заклятия","Получите 25М",{subType:Z.GIFT,cost:25}),new ne('Сириус подарил вам метлу "Молния"',"Получите 100М",{subType:Z.GIFT,cost:100})],ce=se,oe=[new ae('Поездка на автобусе "Ночной рыцарь"',"Перейдите на клетку Свободная стоянка и получите 200М",{subType:Z.GOTO,destanation:20,cost:200}),new ae("В банке гринготтс дракон повредил вашу яйчейку","Получите компенсацию 50М",{subType:Z.GIFT,cost:50}),new ae("Ваше оборотное зелье обращает вас в кошку","вернитесь на 3 клетки назад",{subType:Z.GOTO,destanation:-3}),new ae("Великан Грохх, вырвал все деревья на ваших участках","Заплатите по 25М за каждый дом и по 75М за каждый отель",{subType:Z.HOUSETAX,cost:25}),new ae("Посетите Уизли в Отделе по борьбе с незакон. испол. изобрет. маглов","Если при перемещение пройдете через GO, получите 200М",{subType:Z.GOTO,destanation:24,cost:200}),new ae("Внесите налог на бедных","Заплатите 15М",{subType:Z.TAX,cost:15}),new ae("Декрет об образовании №34: Запрещаются любые игры","Отправляйтесь а Азкабан",{subType:Z.TOJAIL}),new ae("Настало время для церемонии","Отправляйтесь в Большой Зал",{subType:Z.GOTO,destanation:39}),new ae("Вас пригласили в магазин Волшебные Вредилки","Если при перемещение пройдете через GO, получите 200М",{subType:Z.GOTO,destanation:11,cost:200}),new ae("Вас назначили министром магии","Заплатите по 50м каждому игроку",{subType:Z.PLAYERSTAX,cost:50}),new ae("Побез из Азкабана. Вы получили карту побега","Бесплатный выход из тюрьмы",{subType:Z.JAILFREE}),new ae("Профессор Гораций Слизнорт дает вам зелье удачи","Получите 100М",{subType:Z.GIFT,cost:100}),new ae("Вы выиграли кубок по Квиддичу","Получите 150М",{subType:Z.GIFT,cost:150})],de=oe,le=function e(t,n){Object(q["a"])(this,e),this.id=Math.random(),this.name=t,this.cash=1500,this.position=0,this.index=n,this.jailFreeCards=[]},ue=function(){function e(t,n,a){Object(q["a"])(this,e),this.lot=t,this.players=n,this.bet=t.cost,this.whoBet=null,this.current=n[0],this._cb=a}return Object(z["a"])(e,[{key:"accept",value:function(e){this.current.cash>=e&&this.bet<e&&(this.bet=e,this.whoBet=this.current,this.next())}},{key:"cancel",value:function(){var e=this;this.players=this.players.filter((function(t){return t.id!==e.current.id})),this.next()}},{key:"next",value:function(){var e=this;this.checkWinner();var t=this.players.findIndex((function(t){return t.id===e.current.id}))+1;t>=this.players.length&&(t=0),this.current=this.players[t]}},{key:"checkWinner",value:function(){this.players.length<=1&&this.whoBet?this._cb(this.whoBet.index,this.lot.index,this.bet):0==this.players.length&&this._cb(null,null,0)}}]),e}(),he=ue,ye=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(q["a"])(this,e),this.maxPlayer=t.maxPlayer||2,this.players=[],this.board=re,this.whoGo=null,this.finish=!1,this.double=0,this.jail=[],this._endOfTurn=!0,this._magicCards=ce,this._potionCards=de,this._action=!1,this.log=["Необходимо добавить игроков!"],this.auction=null,this.cubes="",this.specialCard=!1,this.currentSpecialCard=null,this.specialAction=!1}return Object(z["a"])(e,[{key:"_findPlayer",value:function(e){return this.players.filter((function(t){return t.id===e}))[0]}},{key:"_findPlayerIndex",value:function(e){return this.players.findIndex((function(t){return t.id===e}))}},{key:"_log",value:function(){for(var e=0;e<arguments.length;e++)this.log.push(arguments[e]),console.log(arguments[e])}},{key:"_nextPlayer",value:function(e){var t=this.players.length,n=this._findPlayerIndex(e);return n+1>=t?this.players[0].id:this.players[n+1].id}},{key:"_changePosition",value:function(e,t){var n=this._findPlayerIndex(e),a=this.players[n].position;this.players[n].position=t,this._action=!0,this._log("Позиция игрока ".concat(this.players[n].name," сменилась с ").concat(a," на ").concat(t),"Необходимо выполнить действие на карте")}},{key:"_move",value:function(e,t){var n=this._findPlayerIndex(e),a=this.board.length,i=this.players[n].position+t;i<a?this._changePosition(e,i):(this._changePosition(e,i-a+0),this.players[n].cash+=200,this._log("Круг пройден. Игрок "+this.players[n].name+" получает 200М"))}},{key:"_moveToJail",value:function(e){var t=this._findPlayer(e);t.jailFreeCards.length>0?(this.players[t.index].jailFreeCards.pop(),this._log("Игрок "+t.name+" тратит карту выхода из тюрьмы!")):(this._changePosition(e,this._getJailPosition()),this.jail.push({id:e,name:t.name,tryes:0}),this._log("Игрок "+t.name+" отправляется в тюрьму!")),this._switchPlayer()}},{key:"_jailBreak",value:function(e){var t=this._findPlayer(e);this.jail=this.jail.filter((function(t){return t.id!==e})),this.double=0,this._log(t.name+" вы выходите из тюрьмы!")}},{key:"_getJailPosition",value:function(){return this.board.filter((function(e){return e.cardType===Q.JAIL}))[0].index}},{key:"_jailCheck",value:function(e){var t=this._findPlayer(e),n=this.jail.findIndex((function(t){return t.id===e})),a=-1!=n;return a&&(this.jail[n].tryes<3?this._log(t.name+" вы походили всего "+this.jail[n].tryes+" из 3-х вы остаетесь в тюрьме!"):(this.jail=this.jail.filter((function(t){return t.id!==e})),a=!1,this._log(t.name+" вы выходите из тюрьмы!"))),{jailStatus:a,jailNumber:n}}},{key:"_getCurentCard",value:function(e){var t=this._findPlayerIndex(e),n=this.players[t].position;return this.board[n]}},{key:"_solvency",value:function(e,t){var n=this._findPlayer(e);return n.cash>=t}},{key:"_payRent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this._findPlayerIndex(e);if(!this._solvency(e,n))return this._log("".concat(this.players[a].name," Вы не можете заплатить ренту")),!1;if(t){var i=this._findPlayerIndex(t);this.players[i].cash+=n,this.players[a].cash-=n,this._log("Заплачена рента ".concat(n," игроку ").concat(this.players[i].name," от игрока ").concat(this.players[a].name))}else this.players[a].cash-=n,this._log("Заплачена рента ".concat(n," игроком ").concat(this.players[a].name));return!0}},{key:"payFine",value:function(){var e=this._findPlayer(this.whoGo),t=this.jail.findIndex((function(t){return t.id===e.id}));if(!this._solvency(e.id,50))return this._log("".concat(e.name," у вас нехватает денег для выкупа!")),!1;-1!=t?(this.players[e.index].cash-=50,this._jailBreak(e.id)):this._log("".concat(e.name," вы не в тюрьме!"))}},{key:"buyProperty",value:function(){var e=this._findPlayer(this.whoGo),t=this.board[e.position];t.canBuy&&!t.owner&&(this._action=!this._buyCard(e.id,t.index))}},{key:"cancelBuy",value:function(){var e=this,t=this._findPlayer(this.whoGo),n=this.board[t.position];n.canBuy&&!n.owner&&this._action&&(this.auction=new he(n,this.players.filter((function(e){return e.id!==t.id})),(function(t,n,a){t&&n&&(console.log(e.players[t],t),e.players[t].cash-=a,e.board[n].owner=e.players[t].id,e.board[n].color="player"+t,e._checkPurchasedAllCategory(e.board[n].catIndex,e.players[t].id)),e.auction=null,e._action=!1})))}},{key:"_buyCard",value:function(e,t){var n=this._findPlayerIndex(e);return this._solvency(e,this.board[t].cost)?(this.players[n].cash-=this.board[t].cost,this.board[t].owner=this.players[n].id,this.board[t].color="player"+n,this._checkPurchasedAllCategory(this.board[t].catIndex,e),this._log("Куплена собственность ".concat(this.board[t].name," игроком ").concat(this.players[n].name)),!0):(this._log("".concat(this.players[n].name," Нехватает денег на покупку!")),!1)}},{key:"_checkPurchasedAllCategory",value:function(e,t){var n=this.board.filter((function(t){return t.catIndex===e})),a=!n.some((function(e){return e.owner!==t}));if(a)for(var i=0;i<n.length;i++)this.board[n[i].index].fullRent=!0;else for(var r=0;r<n.length;r++)this.board[n[r].index].fullRent=!1}},{key:"_switchPlayer",value:function(){this.double=0,this._endOfTurn=!0,this._action=!1,this.whoGo=this._nextPlayer(this.whoGo)}},{key:"createPlayer",value:function(e){if(!(this.players.length>=this.maxPlayer)){var t=new le(e);this.players.push(t);var n=this._findPlayerIndex(t.id);this.players[n].index=n,this.whoGo||(this.whoGo=t.id),this._log("В игру добавлен игрок ".concat(t.name),"Можно ходить!")}}},{key:"go",value:function(){if(this.whoGo)if(this._action)this._log("Сначало выполните действие!");else if(this._endOfTurn){this._endOfTurn=!1;var e=this._findPlayer(this.whoGo),t=this._jailCheck(e.id),n=t.jailStatus,a=t.jailNumber,i=Math.floor(6*Math.random()+1),r=Math.floor(6*Math.random()+1);i!==r?(this.double=0,n?(this.jail[a].tryes+=1,this._switchPlayer()):this._move(e.id,i+r)):i===r&&this.double<2?(this.double+=1,n&&this._jailBreak(e.id),this._move(e.id,i+r)):this._moveToJail(e.id),this.cubes="".concat(e.name," выпало ").concat(i," и ").concat(r),this._log("У игрока "+e.name+" выпало "+i+" и "+r+" Позиция:"+e.position+" Деньги:"+e.cash)}else this._log("Вы не можете сейчас походить!");else this._log("Добавте игроков!")}},{key:"doNext",value:function(){if(this._action){var e=this._findPlayer(this.whoGo),t=this._getCurentCard(e.id);this._action=!this._doAction(e,t,!0)}else this._log("Вам пока нечего делать, завершите ход!")}},{key:"swapCard",value:function(e,t){var n=this._findPlayer(e.id),a=this._findPlayer(t.id);if(e.cash>0){if(n.cash<e.cash)return void this._log("Нехватает денег у продавца "+n.name);this.players[n.index].cash-=e.cash,this.players[a.index].cash+=e.cash}if(t.cash>0){if(a.cash<t.cash)return void this._log("Нехватает денег у покупателя "+a.name);this.players[n.index].cash+=t.cash,this.players[a.index].cash-=t.cash}e.card&&(this.board[e.card.index].owner=t.id,this._checkPurchasedAllCategory(e.card.catIndex,t.id)),t.card&&(this.board[t.card.index].owner=e.id,this._checkPurchasedAllCategory(t.card.catIndex,e.id))}},{key:"toLay",value:function(e){var t=this._findPlayer(this.whoGo),n=this.board[e];n.owner===t.id?n.disabled?this._log("Вы уже заложили эту собственность!"):n.houses>0?(this.board[n.index].houses-=1,this.players[t.index].cash+=n.buildCost/2):(this.board[n.index].disabled=!0,this.players[t.index].cash+=n.deposit):this._log("Это не ваша карта!")}},{key:"redeem",value:function(e){var t=this._findPlayer(this.whoGo),n=this.board[e];n.owner===t.id?n.disabled?(this.board[n.index].disabled=!1,this.players[t.index].cash-=n.buyout):this._log("Эту карту выкупать не надо!"):this._log("Это не ваша карта!")}},{key:"_doAction",value:function(e,t,n){var a=!0;if(this.specialAction){var i=this._doSpecialAction(e,this.currentSpecialCard),r=Object(V["a"])(i,2),s=r[1];return s}switch(t.cardType){case Q.NORMAL:if(t.owner){if(t.owner!==e.id&&!t.disabled){var c=t.rent[t.houses];t.fullRent&&(c*=2),a=this._payRent(e.id,t.owner,c)}}else n&&(a=this._buyCard(e.id,t.index));break;case Q.TOJAIL:this._moveToJail(e.id),this._log("".concat(e.name," отправляется в тюрьму"));break;case Q.TAX:a=this._payRent(e.id,null,t.rent[0]);break;case Q.TRANSPORT:if(t.owner){if(t.owner!==e.id&&!t.disabled){var o=this.board.filter((function(e){return e.cardType===Q.TRANSPORT&&e.owner===t.owner})).length,d=t.rent[o-1];a=this._payRent(e.id,t.owner,d)}}else n&&(a=this._buyCard(e.id,t.index));break;case Q.FACTORY:if(t.owner){if(t.owner!==e.id&&!t.disabled){var l=this.board.filter((function(e){return e.cardType===Q.FACTORY&&e.owner===t.owner})).length,u=l>1?10:4,h=0;this._log("Считаем ренту");for(var y=0;y<u;y++){var p=Math.floor(6*Math.random()+1);h+=p,this._log("Выпало ".concat(p," сумма ").concat(h))}a=this._payRent(e.id,t.owner,h)}}else n&&(a=this._buyCard(e.id,t.index));break;case Q.MAGIC:var f=Math.floor(Math.random()*this._magicCards.length),b=this._doSpecialAction(e,this._magicCards[f]),_=Object(V["a"])(b,2),v=_[0],m=_[1];a=v&&m?this._doAction(e,this._getCurentCard(e.id),n):m;break;case Q.POTION:var g=Math.floor(Math.random()*this._potionCards.length),T=this._doSpecialAction(e,this._potionCards[g]),x=Object(V["a"])(T,2),w=x[0],O=x[1];a=w&&O?this._doAction(e,this._getCurentCard(e.id),n):O;break;default:break}return a}},{key:"_doSpecialAction",value:function(e,t){var n=this;this.specialCard=!0,this.currentSpecialCard=t,this.specialAction=!1;var a=!0,i=!1;switch(t.subType){case Z.GIFT:this.players[e.index].cash+=t.cost;break;case Z.GO:this.players[e.index].position=0,this.players[e.index].cash+=200;break;case Z.GOTO:t.destanation>0?(t.destanation<e.position&&(this.players[e.index].cash+=t.cost),this._changePosition(e.id,t.destanation)):this._changePosition(e.id,e.position+t.destanation),i=!0;break;case Z.HOUSETAX:var r=this.board.filter((function(t){return t.owner===e.id&&t.cardType===Q.NORMAL})),s=r.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,a=n.houses<5?n.houses*t.cost:3*t.cost;return e+a}),0);this._solvency(e.id,s)?this.players[e.index].cash-=s:(this._log("Нехватает денег на оплату!"),this.specialAction=!0,a=!1);break;case Z.JAILFREE:this.players[e.index].jailFreeCards.push(t);break;case Z.PLAYERSGIFT:var c=this.players.filter((function(t){return t.id!==e.id})),o=c.reduce((function(e,a){return n.players[a.index].cash-=t.cost,e+t.cost}),0);this.players[e.index].cash+=o;break;case Z.PLAYERSTAX:var d=this.players.filter((function(t){return t.id!==e.id})),l=d.length*t.cost;this._solvency(e.id,l)?d.forEach((function(a){n.players[a.index].cash+=t.cost,n.players[e.index].cash-=t.cost})):(this._log("Нехватает денег на оплату!"),this.specialAction=!0,a=!1);break;case Z.TAX:this._solvency(e.id,t.cost)?this.players[e.index].cash-=t.cost:(this._log("Нехватает денег на оплату!"),this.specialAction=!0,a=!1);break;case Z.TOJAIL:this._moveToJail(e.id);break;default:break}return this._log(t.name+" "+t.disc),[i,a]}},{key:"endTurn",value:function(){this._endOfTurn?this._log("Вам нужно походить, или ваш ход уже закончен!"):this._action?this._log("Выполните все действия!"):(0===this.double&&(this.whoGo=this._nextPlayer(this.whoGo)),this.currentSpecialCard=null,this.specialCard=!1,this._endOfTurn=!0)}}]),e}(),pe=ye;a["a"].use(c["a"]);var fe=new c["a"].Store({state:{gameStarted:!1,game:null},mutations:{startGame:function(e,t){e.gameStarted=!0,e.game=new pe({maxPlayer:t});for(var n=W(t),a=0;a<t;a++)e.game.createPlayer(n[a])}},actions:{startTurn:function(e){return e.state.game.go()},doAction:function(e){return e.state.game.doNext()},endTurn:function(e){return e.state.game.endTurn()},dontBuy:function(e){return e.state.game.cancelBuy()},acceptAuc:function(e,t){e.state.game.auction.accept(t)},cancelAuc:function(e){e.state.game.auction.cancel()},payFine:function(e){return e.state.game.payFine()}},modules:{},getters:{checkJail:function(e,t){var n=e.game;return-1!==n.jail.findIndex((function(e){return e.id===t.currentPlayer.id}))},currentPlayer:function(e){var t=e.game;return t.players.filter((function(e){return e.id===t.whoGo}))[0]},getOwner:function(e,t){var n=e.game;return n._findPlayer(t.currentCard.owner)||null},currentCard:function(e,t){var n=e.game;return n.board[t.currentPlayer.position]},playersCards:function(e,t){var n=e.game,a=[];return n.players.forEach((function(e){var t=n.board.filter((function(t){return t.owner===e.id}));a.push({id:e.id,cards:t})})),a},playerCards:function(e,t){var n=e.game,a=t.currentPlayer,i=n.board.filter((function(e){return e.owner===a.id})),r=a.jailFreeCards.map((function(e){return Object.assign({},e,{catIndex:1e3})})),s=i.concat(r);return s.sort((function(e,t){return e.catIndex<t.catIndex?-1:e.catIndex>t.catIndex?1:e.index<t.index?-1:1})),s}}}),be=n("0086"),_e=n.n(be);a["a"].config.productionTip=!1,a["a"].use(_e.a,{disableClick:!1,touchClass:"",tapTolerance:10,touchHoldTolerance:400,swipeTolerance:10,longTapTimeInterval:400}),new a["a"]({router:H,store:fe,render:function(e){return e(L)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),i=n.n(a);i.a},9608:function(e,t,n){"use strict";var a=n("4bb8"),i=n.n(a);i.a},"9c0c":function(e,t,n){},cff2:function(e,t,n){},d5a9:function(e,t,n){"use strict";var a=n("cff2"),i=n.n(a);i.a}});
//# sourceMappingURL=app.87938033.js.map